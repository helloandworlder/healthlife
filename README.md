# HealthLife ğŸƒâ€â™‚ï¸

ä¸€æ¬¾åŸºäº Flutter çš„å¥åº·ç”Ÿæ´»ç®¡ç†åº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·å…»æˆå¥åº·ä¹ æƒ¯ã€è¿½è¸ªå¥åº·æ•°æ®ã€å®ç°å¥åº·ç›®æ ‡ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ“Š æ•°æ®è¿½è¸ª
- **å¥åº·æ•°æ®åŒæ­¥** - æ”¯æŒ Apple Health (iOS) å’Œ Health Connect (Android)
- **ä½“é‡è®°å½•** - æ‰‹åŠ¨è®°å½•ä½“é‡ï¼ŒæŸ¥çœ‹è¶‹åŠ¿å›¾è¡¨
- **çƒ­é‡ç®¡ç†** - è®°å½•ä¸‰é¤çƒ­é‡ï¼Œæ™ºèƒ½è®¡ç®—çƒ­é‡é¢„ç®—
- **æ´»åŠ¨æ—¥å†** - å‘¨/æœˆè§†å›¾æŸ¥çœ‹è¿åŠ¨æ•°æ®

### ğŸ¯ ç›®æ ‡ç®¡ç†
- **ç›®æ ‡æ¨¡æ¿** - æä¾›å¸¸ç”¨å¥åº·ç›®æ ‡æ¨¡æ¿ï¼ˆå–æ°´ã€è¿åŠ¨ã€ç¡çœ ç­‰ï¼‰
- **è‡ªå®šä¹‰ç›®æ ‡** - æ”¯æŒåˆ›å»ºä¸ªæ€§åŒ–ç›®æ ‡ï¼Œè®¾ç½®æé†’
- **æ‰“å¡ç³»ç»Ÿ** - æ¯æ—¥æ‰“å¡ï¼Œè¿½è¸ªå®Œæˆè¿›åº¦
- **æ•°æ®å›é¡¾** - ç›®æ ‡å®Œæˆæƒ…å†µç»Ÿè®¡ä¸åˆ†æ

### ğŸ¾ å® ç‰©å…»æˆ
- **è™šæ‹Ÿå® ç‰©** - å®Œæˆç›®æ ‡è·å¾—ç»éªŒå€¼ï¼Œå…»æˆä¸“å±å® ç‰©
- **ç­‰çº§ç³»ç»Ÿ** - å® ç‰©éšç»éªŒå‡çº§ï¼Œè§£é”ä¸åŒç§°å·
- **é‡Œç¨‹ç¢‘å¥–åŠ±** - è¾¾æˆç‰¹å®šç›®æ ‡è·å¾—æˆå°±å¥–åŠ±

### ğŸ“… æ¯å‘¨å›é¡¾
- **æ•°æ®æ±‡æ€»** - è‡ªåŠ¨ç”Ÿæˆæ¯å‘¨å¥åº·æ•°æ®æŠ¥å‘Š
- **æ™ºèƒ½ç§°å·** - æ ¹æ®è¡¨ç°ç”Ÿæˆä¸ªæ€§åŒ–å‘¨ç§°å·
- **åˆ†äº«å¡ç‰‡** - ç”Ÿæˆç²¾ç¾åˆ†äº«å›¾ç‰‡ï¼Œä¸€é”®åˆ†äº«

### ğŸ¤– AI å¥åº·åŠ©æ‰‹
- **æ™ºèƒ½å¯¹è¯** - åŸºäº LangChain + OpenAI Compatible API
- **ä¸ªæ€§åŒ–å»ºè®®** - ç»“åˆç”¨æˆ·å¥åº·æ•°æ®æä¾›å®šåˆ¶å»ºè®®
- **å¤šæ¨¡å‹æ”¯æŒ** - æ”¯æŒ OpenAIã€Azureã€Ollamaã€DeepSeek ç­‰

### âš™ï¸ è®¾ç½®ä¸ä¸ªæ€§åŒ–
- **å¤šè¯­è¨€** - æ”¯æŒä¸­æ–‡/è‹±æ–‡
- **å•ä½åˆ‡æ¢** - kg/lbã€cm/inch è‡ªç”±åˆ‡æ¢
- **é€šçŸ¥æé†’** - ç›®æ ‡æé†’ã€æ‰“å¡æé†’
- **AI é…ç½®** - è‡ªå®šä¹‰ API ç«¯ç‚¹ã€å¯†é’¥ã€æ¨¡å‹

## æŠ€æœ¯æ¶æ„

### æŠ€æœ¯æ ˆ

| ç±»åˆ« | æŠ€æœ¯ |
|-----|-----|
| æ¡†æ¶ | Flutter 3.10+ / Dart |
| çŠ¶æ€ç®¡ç† | Riverpod 2.x + Riverpod Generator |
| è·¯ç”± | GoRouter |
| æ•°æ®åº“ | Drift (SQLite) |
| AI | LangChain Dart + OpenAI Compatible |
| å¥åº·æ•°æ® | health åŒ… (HealthKit / Health Connect) |
| ä»£ç ç”Ÿæˆ | Freezed 3.x, JSON Serializable |
| å›¾è¡¨ | fl_chart |
| é€šçŸ¥ | flutter_local_notifications |

### é¡¹ç›®ç»“æ„

```
lib/
â”œâ”€â”€ app/                    # åº”ç”¨å…¥å£ã€è·¯ç”±ã€å…¨å±€ Provider
â”‚   â”œâ”€â”€ app.dart
â”‚   â”œâ”€â”€ router.dart
â”‚   â””â”€â”€ providers.dart
â”œâ”€â”€ core/                   # æ ¸å¿ƒå·¥å…·å’Œå¸¸é‡
â”‚   â”œâ”€â”€ constants/          # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ theme/              # ä¸»é¢˜é…ç½®
â”‚   â””â”€â”€ utils/              # å·¥å…·ç±» (BMIè®¡ç®—ã€çƒ­é‡è®¡ç®—ç­‰)
â”œâ”€â”€ features/               # åŠŸèƒ½æ¨¡å— (æŒ‰åŠŸèƒ½åˆ’åˆ†)
â”‚   â”œâ”€â”€ dashboard/          # é¦–é¡µä»ªè¡¨ç›˜
â”‚   â”œâ”€â”€ goals/              # ç›®æ ‡ç®¡ç†
â”‚   â”œâ”€â”€ gamification/       # å® ç‰©å…»æˆ
â”‚   â”œâ”€â”€ chat_ai/            # AI åŠ©æ‰‹
â”‚   â”œâ”€â”€ review/             # æ¯å‘¨å›é¡¾
â”‚   â”œâ”€â”€ activity_calendar/  # æ´»åŠ¨æ—¥å†
â”‚   â”œâ”€â”€ meals/              # é¥®é£Ÿè®°å½•
â”‚   â”œâ”€â”€ weight/             # ä½“é‡è®°å½•
â”‚   â”œâ”€â”€ health_source/      # å¥åº·æ•°æ®æº
â”‚   â”œâ”€â”€ onboarding/         # å¼•å¯¼æµç¨‹
â”‚   â”œâ”€â”€ profile/            # ä¸ªäººèµ„æ–™
â”‚   â””â”€â”€ settings/           # è®¾ç½®
â”œâ”€â”€ shared/                 # å…±äº«ç»„ä»¶
â”‚   â”œâ”€â”€ db/                 # æ•°æ®åº“ (Drift)
â”‚   â”‚   â”œâ”€â”€ tables/         # è¡¨å®šä¹‰
â”‚   â”‚   â””â”€â”€ daos/           # æ•°æ®è®¿é—®å¯¹è±¡
â”‚   â”œâ”€â”€ repositories/       # æ•°æ®ä»“åº“
â”‚   â”œâ”€â”€ services/           # æœåŠ¡å±‚
â”‚   â””â”€â”€ widgets/            # é€šç”¨ç»„ä»¶
â””â”€â”€ main.dart
```

### åŠŸèƒ½æ¨¡å—æ¶æ„

æ¯ä¸ªåŠŸèƒ½æ¨¡å—éµå¾ªæ¸…æ™°çš„åˆ†å±‚æ¶æ„ï¼š

```
feature/
â”œâ”€â”€ application/     # ä¸šåŠ¡é€»è¾‘å±‚ (Notifier/Service)
â”œâ”€â”€ domain/          # é¢†åŸŸæ¨¡å‹ (Freezed æ•°æ®ç±»)
â””â”€â”€ presentation/    # UI å±‚
    â”œâ”€â”€ *_page.dart  # é¡µé¢
    â””â”€â”€ widgets/     # é¡µé¢ä¸“å±ç»„ä»¶
```

### æ•°æ®æµ

```
UI (Widget)
    â†“ watch/read
Provider (Riverpod)
    â†“ 
Notifier (ä¸šåŠ¡é€»è¾‘)
    â†“
DAO (æ•°æ®è®¿é—®)
    â†“
Drift Database (SQLite)
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Flutter SDK >= 3.10.0
- Dart SDK >= 3.0.0
- Xcode 15+ (iOS å¼€å‘)
- Android Studio (Android å¼€å‘)

### å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/helloandworlder/healthlife.git
cd healthlife

# å®‰è£…ä¾èµ–
flutter pub get

# ç”Ÿæˆä»£ç  (Freezed, Drift, Riverpod)
dart run build_runner build --delete-conflicting-outputs
```

### è¿è¡Œé¡¹ç›®

```bash
# iOS æ¨¡æ‹Ÿå™¨
flutter run -d "iPhone 16 Pro"

# Android æ¨¡æ‹Ÿå™¨
flutter run -d emulator-5554

# çœŸæœºè¿è¡Œ (éœ€è¦è¿æ¥è®¾å¤‡)
flutter run
```

### iOS é…ç½® (HealthKit)

1. åœ¨ Xcode ä¸­æ‰“å¼€ `ios/Runner.xcworkspace`
2. é€‰æ‹© Runner target â†’ Signing & Capabilities
3. æ·»åŠ  HealthKit capability
4. åœ¨ `ios/Runner/Info.plist` ä¸­å·²é…ç½®å¥åº·æ•°æ®æƒé™è¯´æ˜

> âš ï¸ æ³¨æ„ï¼šiOS æ¨¡æ‹Ÿå™¨ä¸æ”¯æŒ HealthKitï¼Œè¯·ä½¿ç”¨çœŸæœºæµ‹è¯•å¥åº·æ•°æ®åŒæ­¥åŠŸèƒ½

### Android é…ç½® (Health Connect)

1. ç¡®ä¿è®¾å¤‡å·²å®‰è£… Health Connect åº”ç”¨
2. æƒé™é…ç½®å·²åœ¨ `AndroidManifest.xml` ä¸­å®Œæˆ

## æ‰“åŒ…å‘å¸ƒ

### iOS æ‰“åŒ…

```bash
# æ„å»º Release ç‰ˆæœ¬
flutter build ios --release

# åœ¨ Xcode ä¸­å½’æ¡£
# Product â†’ Archive â†’ Distribute App
```

### Android æ‰“åŒ…

```bash
# æ„å»º APK
flutter build apk --release

# æ„å»º App Bundle (æ¨èä¸Šæ¶ Google Play)
flutter build appbundle --release
```

### ç­¾åé…ç½®

#### Android ç­¾å

1. ç”Ÿæˆç­¾åå¯†é’¥ï¼š
```bash
keytool -genkey -v -keystore ~/healthlife-release.jks -keyalg RSA -keysize 2048 -validity 10000 -alias healthlife
```

2. åˆ›å»º `android/key.properties`ï¼š
```properties
storePassword=<å¯†ç >
keyPassword=<å¯†ç >
keyAlias=healthlife
storeFile=/path/to/healthlife-release.jks
```

3. åœ¨ `android/app/build.gradle.kts` ä¸­é…ç½®ç­¾å

## å¼€å‘æŒ‡å—

### ä»£ç ç”Ÿæˆ

é¡¹ç›®ä½¿ç”¨å¤šä¸ªä»£ç ç”Ÿæˆå™¨ï¼Œä¿®æ”¹ç›¸å…³æ–‡ä»¶åéœ€è¦é‡æ–°ç”Ÿæˆï¼š

```bash
# ä¸€æ¬¡æ€§ç”Ÿæˆæ‰€æœ‰ä»£ç 
dart run build_runner build --delete-conflicting-outputs

# ç›‘å¬æ¨¡å¼ (å¼€å‘æ—¶æ¨è)
dart run build_runner watch --delete-conflicting-outputs
```

éœ€è¦ç”Ÿæˆä»£ç çš„åœºæ™¯ï¼š
- ä¿®æ”¹ `@freezed` ç±» â†’ ç”Ÿæˆ `.freezed.dart`
- ä¿®æ”¹ `@riverpod` æ³¨è§£ â†’ ç”Ÿæˆ `.g.dart`
- ä¿®æ”¹ Drift è¡¨å®šä¹‰ â†’ ç”Ÿæˆæ•°æ®åº“ä»£ç 

### æ·»åŠ æ–°åŠŸèƒ½æ¨¡å—

1. åœ¨ `lib/features/` ä¸‹åˆ›å»ºæ–°ç›®å½•
2. æŒ‰ç…§åˆ†å±‚æ¶æ„åˆ›å»ºå­ç›®å½•ï¼š
   - `application/` - ä¸šåŠ¡é€»è¾‘
   - `domain/` - æ•°æ®æ¨¡å‹
   - `presentation/` - UI
3. åœ¨ `router.dart` ä¸­æ·»åŠ è·¯ç”±
4. è¿è¡Œä»£ç ç”Ÿæˆå™¨

### æ•°æ®åº“è¿ç§»

ä¿®æ”¹æ•°æ®åº“è¡¨ç»“æ„æ—¶ï¼š

1. ä¿®æ”¹ `lib/shared/db/tables/` ä¸­çš„è¡¨å®šä¹‰
2. æ›´æ–° `lib/shared/db/app_database.dart` ä¸­çš„ `schemaVersion`
3. åœ¨ `migration` å›è°ƒä¸­æ·»åŠ è¿ç§»é€»è¾‘
4. è¿è¡Œ `dart run build_runner build`

### æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
flutter test

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
flutter test test/core/utils/bmi_calculator_test.dart

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
flutter test --coverage
```

### ä»£ç æ£€æŸ¥

```bash
# é™æ€åˆ†æ
flutter analyze

# æ ¼å¼åŒ–ä»£ç 
dart format lib/
```

## AI åŠ©æ‰‹é…ç½®

åº”ç”¨æ”¯æŒä»»ä½• OpenAI Compatible APIï¼ŒåŒ…æ‹¬ï¼š

| æœåŠ¡ | ç«¯ç‚¹ç¤ºä¾‹ |
|-----|---------|
| OpenAI | `https://api.openai.com/v1` |
| Azure OpenAI | `https://{resource}.openai.azure.com/openai/deployments/{deployment}` |
| Ollama | `http://localhost:11434/v1` |
| LM Studio | `http://localhost:1234/v1` |
| DeepSeek | `https://api.deepseek.com/v1` |
| Groq | `https://api.groq.com/openai/v1` |

é…ç½®æ­¥éª¤ï¼š
1. æ‰“å¼€è®¾ç½®é¡µé¢
2. æ‰¾åˆ°ã€ŒAI åŠ©æ‰‹é…ç½®ã€åŒºåŸŸ
3. è®¾ç½® API ç«¯ç‚¹ã€API Keyã€æ¨¡å‹åç§°
4. é…ç½®ä¿¡æ¯ä»…å­˜å‚¨åœ¨æœ¬åœ°ï¼Œä¸ä¼šä¸Šä¼ 

## é¡¹ç›®ç»´æŠ¤

### ä¾èµ–æ›´æ–°

```bash
# æŸ¥çœ‹å¯æ›´æ–°çš„ä¾èµ–
flutter pub outdated

# æ›´æ–°ä¾èµ–
flutter pub upgrade

# æ›´æ–°åˆ°æœ€æ–°ä¸»ç‰ˆæœ¬ (è°¨æ…ä½¿ç”¨)
flutter pub upgrade --major-versions
```

### å¸¸è§é—®é¢˜

**Q: iOS æ¨¡æ‹Ÿå™¨æ— æ³•è·å–å¥åº·æ•°æ®ï¼Ÿ**
A: iOS æ¨¡æ‹Ÿå™¨ä¸æ”¯æŒ HealthKitï¼Œè¯·ä½¿ç”¨çœŸæœºæµ‹è¯•ã€‚

**Q: ä»£ç ç”Ÿæˆå¤±è´¥ï¼Ÿ**
A: å°è¯•æ¸…ç†åé‡æ–°ç”Ÿæˆï¼š
```bash
dart run build_runner clean
dart run build_runner build --delete-conflicting-outputs
```

**Q: AI åŠ©æ‰‹æ— å“åº”ï¼Ÿ**
A: æ£€æŸ¥è®¾ç½®ä¸­çš„ API é…ç½®æ˜¯å¦æ­£ç¡®ï¼Œç¡®ä¿ç½‘ç»œå¯ä»¥è®¿é—® API ç«¯ç‚¹ã€‚

## è®¸å¯è¯

MIT License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**HealthLife** - è®©å¥åº·æˆä¸ºä¹ æƒ¯ ğŸ’ª
